/*
 * Desmos Component Overrides
 *
 * This file contains CSS overrides to re-theme the Desmos calculator components
 * to match the application's design system. We use CSS variables defined in
 * `globals.css` to ensure consistency with the light, dark, and hell-bound themes.
 *
 * The selectors used here target the default class names generated by the Desmos API.
 * These may be subject to change in future Desmos updates.
*/

/* Main container and chrome */
.desmos-container .dcg-container {
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
}

/* Header bar */
.desmos-container .dcg-header-container {
  background-color: hsl(var(--muted));
  border-bottom: 1px solid hsl(var(--border));
}

.desmos-container .dcg-header-title {
  color: hsl(var(--card-foreground));
}

/* Expression list */
.desmos-container .dcg-expressions-container {
  background-color: hsl(var(--card));
  border-right: 1px solid hsl(var(--border));
}

.desmos-container .dcg-expressionitem {
  background-color: hsl(var(--card));
  border-bottom: 1px solid hsl(var(--border));
}

.desmos-container .dcg-expression-math-container {
  background-color: hsl(var(--input));
  color: hsl(var(--foreground));
  border-radius: var(--radius);
  border: 1px solid hsl(var(--border));
}

.desmos-container .dcg-mq-focused .dcg-expression-math-container {
  border-color: hsl(var(--ring));
  box-shadow: 0 0 0 2px hsl(var(--ring) / 0.5);
}

/* Buttons and Icons */
.desmos-container .dcg-btn-flat-gray,
.desmos-container .dcg-btn-flat-blue {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  border-radius: var(--radius);
  transition: background-color 0.2s;
  border: none;
}

.desmos-container .dcg-btn-flat-gray:hover,
.desmos-container .dcg-btn-flat-blue:hover {
  background-color: hsl(var(--primary) / 0.9);
}

.desmos-container .dcg-icon-add,
.desmos-container .dcg-icon-settings,
.desmos-container .dcg-icon-delete,
.desmos-container .dcg-icon-keyboard,
.desmos-container .dcg-icon-x,
.desmos-container .dcg-icon-chevron-up,
.desmos-container .dcg-icon-chevron-down,
.desmos-container .dcg-icon-chevron-left,
.desmos-container .dcg-icon-chevron-right,
.desmos-container .dcg-icon-zoom-in,
.desmos-container .dcg-icon-zoom-out,
.desmos-container .dcg-icon-zoom-fit {
  color: hsl(var(--foreground)) !important;
  fill: hsl(var(--foreground)) !important;
}

.desmos-container .dcg-btn-flat-gray .dcg-icon {
    color: hsl(var(--primary-foreground)) !important;
    fill: hsl(var(--primary-foreground)) !important;
}

/*
 * Overrides for graph-paper controls (e.g., zoom, settings).
 * These controls are located on the graph paper itself and need a more
 * specific selector to override the default white color.
 */
.desmos-container .dcg-grapher .dcg-icon-settings,
.desmos-container .dcg-grapher .dcg-icon-zoom-in,
.desmos-container .dcg-grapher .dcg-icon-zoom-out,
.desmos-container .dcg-zoom-controls .dcg-icon,
.desmos-container .dcg-settings-icon-container .dcg-icon {
  color: hsl(var(--foreground)) !important;
  fill: hsl(var(--foreground)) !important;
}

/* Graph Settings Panel */
.desmos-container .dcg-settings-container {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    color: hsl(var(--foreground));
}

.desmos-container .dcg-settings-title {
    color: hsl(var(--card-foreground));
    font-weight: 600;
}

/* Checkboxes in Settings */
.desmos-container .dcg-checkbox-container {
    color: hsl(var(--foreground));
}

.desmos-container .dcg-checkbox-box {
    border: 1px solid hsl(var(--border)) !important;
    background-color: hsl(var(--input));
}

.desmos-container .dcg-checkbox-checked .dcg-checkbox-box {
    background-color: hsl(var(--primary));
    border-color: hsl(var(--primary));
}

/* Sliders in Settings */
.desmos-container .dcg-slider .dcg-slider-track {
    background-color: hsl(var(--muted));
}

.desmos-container .dcg-slider .dcg-slider-thumb {
    background-color: hsl(var(--primary));
    border: 2px solid hsl(var(--primary-foreground));
}

/* Input fields in Settings */
.desmos-container .dcg-settings-container .dcg-input-container {
    background-color: hsl(var(--input));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
}

.desmos-container .dcg-settings-container .dcg-input-container.dcg-mq-focused {
    border-color: hsl(var(--ring));
    box-shadow: 0 0 0 2px hsl(var(--ring) / 0.5);
}

/* Keypad */
.desmos-container .dcg-keypad {
  background-color: hsl(var(--muted));
  border-top: 1px solid hsl(var(--border));
}

.desmos-container .dcg-keypad-btn {
  background-color: hsl(var(--card));
  color: hsl(var(--foreground));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
}

.desmos-container .dcg-keypad-btn:hover {
  background-color: hsl(var(--accent));
}

/* "Powered by Desmos" subtitle */
.desmos-powered-by {
  font-size: 0.875rem; /* 14px */
  font-weight: 600;
  background: linear-gradient(
    90deg,
    hsl(var(--muted-foreground)) 25%,
    #28a745 50%,
    hsl(var(--muted-foreground)) 75%
  );
  background-size: 200% auto;
  color: transparent;
  -webkit-background-clip: text;
  background-clip: text;
  animation: shimmer-green 5s linear infinite;
}
